<UserControl x:Class="RemoteDesktop.Views.UserControls.WindowBar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

             BorderBrush="{DynamicResource BorderBrush}"
             BorderThickness="0,0,0,1"
             Background="{DynamicResource BackgroundBrush}">

   <UserControl.Resources>
      <Style x:Key="WindowButtonStyle" TargetType="{x:Type Button}">
         <Setter Property="FontSize" Value="10" />
         <Setter Property="FontFamily" Value="Segoe Fluent Icons, Segoe MDL2 Assets" />
         <Setter Property="Padding" Value="15,10" />
         <Setter Property="Background" Value="Transparent" />
         <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
         <Setter Property="Template">
            <Setter.Value>
               <ControlTemplate TargetType="Button">
                  <Border x:Name="Border" BorderThickness="0" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}">
                     <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" Padding="{TemplateBinding Padding}" Text="{TemplateBinding Content}" />
                  </Border>

                  <ControlTemplate.Triggers>
                     <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{DynamicResource ButtonHoverBrush}" />
                     </Trigger>
                     <Trigger Property="IsPressed" Value="True">
                        <Setter TargetName="Border" Property="Background" Value="{DynamicResource ButtonPressedBrush}" />
                     </Trigger>
                     <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="Gray" />
                     </Trigger>
                  </ControlTemplate.Triggers>
               </ControlTemplate>
            </Setter.Value>
         </Setter>
      </Style>
   </UserControl.Resources>

   <Grid Height="29" WindowChrome.IsHitTestVisibleInChrome="True">
      <Grid.ColumnDefinitions>
         <ColumnDefinition Width="Auto" />
         <ColumnDefinition Width="Auto" />
         <ColumnDefinition Width="Auto" />
         <ColumnDefinition />
      </Grid.ColumnDefinitions>

      <TextBlock Grid.Column="1"
                 VerticalAlignment="Center"
                 Text="{Binding Title, RelativeSource={RelativeSource AncestorType=UserControl}}"
                 Visibility="{Binding ShowTitle, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BoolVisibilityInverseConverter}}"
                 Margin="5,0"
                 Foreground="{DynamicResource TextBrush}" />

      <ContentPresenter Grid.Column="2" Content="{Binding LeftContent, RelativeSource={RelativeSource AncestorType=UserControl}}" />

      <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{x:Null}">
         <ContentPresenter Content="{Binding RightContent, RelativeSource={RelativeSource AncestorType=UserControl}}" />

         <Button Content="&#xE949;"
                 Style="{StaticResource WindowButtonStyle}"
                 Command="{Binding MinimizeCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                 CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                 IsEnabled="{Binding CanMinimized, RelativeSource={RelativeSource AncestorType=UserControl}}"
                 ToolTip="Minimize" />

         <Button Content="&#xE739;"
                 Style="{StaticResource WindowButtonStyle}"
                 Command="{Binding MaximizeCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                 CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                 IsEnabled="{Binding CanMaximized, RelativeSource={RelativeSource AncestorType=UserControl}}"
                 ToolTip="Maximize" />

         <Button Content="&#xE106;"
                 Style="{StaticResource WindowButtonStyle}"
                 Command="{Binding CloseCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                 CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                 ToolTip="Close" />
      </StackPanel>
   </Grid>
</UserControl>